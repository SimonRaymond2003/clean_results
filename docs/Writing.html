<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Writing</title>

<script src="site_libs/header-attrs-2.22/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>







<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Simon Raymond</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="heckman.html">Heckman Selection</a>
</li>
<li>
  <a href="thirddown.html">Third Down Analysis</a>
</li>
<li>
  <a href="attempt_ols.html">Attempts OLS</a>
</li>
<li>
  <a href="robustness_checks.html">Robustness Checks</a>
</li>
<li>
  <a href="Writing.html">Writing</a>
</li>
<li>
  <a href="kicker_exogenous.html">Proof of Exogeniety</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Writing</h1>

</div>


<div id="context" class="section level1">
<h1>context</h1>
<p>The National Football League is a multi-billion dollar industry that
has seen rapid growth within the American and International. This growth
has placed more and more importance on the performance of NFL teams as
they fight to win games to increase the popularity of their team as
Davis and End (2010) argue that successful NFL franchises have
measurable economic impacts on their local areas. This revelation has
given rise to a age of data analytics in the NFL as teams seek to gain
competitive advantages over their rivals. This had led GMs and coaches
to explore different avenues of strategies.</p>
<p>In the NFL, a team’s offensive possession is structured around a
series of four “downs” where they attempt to advance the ball at least
10 yards to earn a new set of downs and maintain possession. When a team
reaches fourth down without achieving the needed yardage, they face a
pivotal decision. Teams typically choose between three options: punt the
ball to establish favorable field position for their defense, attempt a
field goal if within reasonable range (worth 3 points), or “go for it”
by running an offensive play to try and gain the required yardage. For
many years in the NFL there seemed to be a consistent standard that when
faced with a fourth down your team will kick a field goal or punt the
ball for better field position. The only exception being the dying
moments in a game when teams are desperate for a miracle.</p>
<p>In American Football many teams have shifted to being more aggresive
on fourth down. Most famously are the Detroit Lions. Since the arrival
of their current head coach Dan Campbell, the lions adopted a aggressive
strategy to match their aggressive “biting off knee caps” mentality
(Birkett, 2023). While the lions have seen success for the first time in
years, they have also been criticized for their aggressive play calling.
This was highlighted in the 2023-24 playoff divisional round game in
which the Lions failed a fourth down attempt that was painted as
unnecessary (Sporting News, 2024). After this mid-game failure there
seemed to be a shift in momentum and the lions lost the game.</p>
</div>
<div id="glimpse-of-results" class="section level1">
<h1>glimpse of results</h1>
</div>
<div id="research-problem" class="section level1">
<h1>research problem</h1>
<p>A result like this causes one ask the question “Did the Lions make
the right call?”. This question seems to be getting answered as “yes” by
the current literature. However, we need to know if different teams
should “go-for-it” or not “go-for-it” depending on their situation and
team make up. For example, it could be argued that the lions should have
attempted the crucial fourth down in the 2023-24 playoff divisional
round game. However, if the Panthers (which were a significantly worse
team) were is that situation it could be argued that they should not
have been as aggressive. This is because the panthers could have had a
worse chance of being able to convert on fourth down.</p>
<p>On top of this, we must be weary of any recommendation that is given
to a head coach. The truth is that we are not on the field, in the
locker rooms, or in team meeting. This means coaches may know more then
us in certain game time decision. We must approach this topic with the
idea of being more practical and clear to coaches. If we are simply
pointing our algorithms and giving black-box predictions we lose all
credibility as one would be oblivous to the true depth of decision
making in the NFL.</p>
</div>
<div id="research-question" class="section level1">
<h1>research question</h1>
<p>This leads us to have a need to answer some key questions about
fourth downs in the NFL. First, are coaches in the NFL actually better
are making these decision then analysts? Second, is what key variables
about players have predictive power in fourth down attempts? In other
words, are there players that are more important in fourth down
situations when compared to other situations. Finally, do these key
variables about players have a causal effect on the outcome of fourth
down attempts? Answering these questions will allow coaches to look for
key signals in fourth down situations and to know which players to start
on that fourth down if it is decided to attempt. This also can be
applied in discovering specialty players that are overlooked due to poor
performances in situations that are not similar to fourth down.</p>
</div>
<div id="liturature-review" class="section level1">
<h1>liturature review</h1>
<p>Much discourse revolves around the idea that NFL coaches are acting
overly averse to risk, which is lowering their expected wins. Romer
(2006) found that teams had begun to move towards a more conservative or
safe strategy in the NFL. He argues that teams value successful gambles
more then the expected win percentage in a game. He theorizes that the
poor decision making is either due to risk aversion or it is due to poor
information.</p>
<p>To further this point using matching analysis, Yam and Lopez (2018)
quantified this conservative decision-making, finding that teams could
gain approximately 0.4 wins per year by being more aggressive on fourth
downs.</p>
<p>Goff and Locke (2019) found when revisiting Romer’s framework that
Romer’s core findings are still held to be true. However, they argue
that overly conservative calls are not due to poor decision making.
Instead they point to risk aversion as they estimate that coaches are
willing to give up two-thirds of a expected point to avoid the
uncertainty of fourth down attempts.</p>
<p>On top of this, there seems to be evidence that coaches are more
cautious when their job is on the line. Owens and Roach (2018) found
that in the NCAA coaches are relatively more conservative when they are
more likely to be fired. At the same time they found when a coach was
likely to be promoted they behave more aggressive then normal.</p>
<p>If a team feels to be “on fire” should they be more aggressive since
they feel they have momentum? A important area of literature is the
fallacy of the “hot hand”. The hot hand is a cognitive bias that leads
people to believe that a person who has a successful outcome is more
likely to have a successful outcome in future attempts. Gilovich et
al. (1985) investigated the “hot hand” and “shooting streaks” in
basketball. They found that both players and fans believed in the
fallacy despite shots being independent of each other. Losak et
al. (2023) similarly discovered that fantasy baseball users gravitated
towards “hot” players. At the same time they were unable to identify a
viable hot hand strategy in DraftKings DFS baseball.</p>
<p>Despite these common findings in other sports there does seem to be
some evidence of momentum existing in the NFL. Roebber et al.(2022,
p. 2) defined momentum in the NFL as “the sustained increase in win
probability by a single team over the course of at least 2 successive
changes in possession”. With this definition, they found that streaks of
win probability in football are non-random and are in fact predictable
with Artificial Neural Network Models.</p>
<p>Lehman &amp; Hahn (2013) looked to identify momentum across and
within games in the NFL. Within-period momentum was found to encourage
teams to take more risks. Negative within-period momentum was in turn
found to encourage teams to take less risks. It was also discovered that
across-period momentum has an effect only until a within-period momentum
was established in a game</p>
</div>
<div id="gap-in-the-research" class="section level1">
<h1>gap in the research</h1>
<p>A gap in the current research is caused by the lack in quality data.
Currently we observe many studies include team-aggregated grades or
summary statistics about teams that are playing against each other.
While some situations can allow this, our non-parametric models will be
able to handle data with thousands of different variables. To take
advantage of this, we will have information about every single player
that is on the field when the ball is snapped. This will allow us to
have better prediction power then previous researchers. These
non-parametric models will also allow us to discover key player specific
variables that can allow for further causal inference with specific
on-field positions.</p>
</div>
<div id="roadmap" class="section level1">
<h1>roadmap</h1>
</div>
<div id="data-sources" class="section level1">
<h1>data sources</h1>
<p>Our data was pulled from two main sources.</p>
<p>As a base the nflverse package provided in R gave us play by play
data for the years of 2017 to 2023. This includes basic game information
and the IDs of players that participated each play. The reason for our
cutoff of 2017 is due to the NFL only putting tracking chips in players
jerseys as of the 2016 season. The 2016 season however still had many
inconsistencies which leads us to drop the year.</p>
<p>The key part then is the merging of Pro Football Focus’s aggregated
weekly data. The statistics are downloaded as premium player reports on
a weekly bases and then aggrigated to time lengths of 2 weeks, 12 weeks
and 3 years. These time length have been arbitrarly picked which leaves
room for future research. It was found that the 12 week timeframe better
captured the significance and value of players. This is due to the 2
week timeframe struggling with noise while the 3 year timeframe is not
sensitive enough to emerging or aging players.</p>
<p>Players from the PFF data set where merged into our base play by play
data set based on a 12 step algorithm that matched ids accross the twos
sources. The steps included pre-match ids, and then players matched on
names, teams and positions.</p>
<p>As a final note attendance data was also scrapped from pro football
reference.</p>
</div>
<div id="variable-selection" class="section level1">
<h1>variable selection</h1>
<p>Our variables that we work with fall into one of two categories. They
are either statistics about players or about the situation of the play.
The player variables consist of variables that describe who was on the
field. We also have access to player variables of the starting players
on each team based on depth chart data provided by nflverse. In both
situations the players are sorted into columns based on depth chart
position. For example, the starting QB is also in the offense_player_1
slot to allow us to maintain consistancy.</p>
<p>In our models to predict conversions in third or fourth downs we use
the following base collumns:</p>
<p>Our models that are used to predict the attempt of a fourth downs
conversion then use the following base collums:</p>
<p>Obvously our attempt models are forced to only use the starter player
statistics as we cannot use the players on the field to predict the type
of player that was called.</p>
</div>
<div id="methodology-and-tools" class="section level1">
<h1>Methodology and tools</h1>
<p>Tools that have both predictive and causal traits are being
employed.</p>
<p>In our data we often had 20,000+ different player variables. This
clearly is a situation where predictive tools such as Random Forest and
XGBoosting thrive. In the use of XGBoosting we first use boostrapping to
tune for optimal hyperparameters. Seccond we will run the tuned model on
1000 train/test bootstrapped splits of data to report the AUC. This
process will be done when predicting attempts and conversion.</p>
<p>Similarly we can enact Random Forest to receive a OOB AUC. Random
Forest will also let us receive insight into what variables have high
importance in predictions based on MDA and MDI. This ranking of
variables not only allows us to feature select for XGBoosting but it
also assisted in watching what variables could be considered for causal
analysis.</p>
<p>For the causal analysis we will be enploying the a form of the
Heckman correction. This is due to the selection bais in fourth downs.
Since not all fourth downs are attempted, we do not have data on the
fourth downs that never happened. We look to deal with this bias by
using a evolved verison of heckmans original model. Im the original
paper it was proposed to use a two step process. In the selection step
one would predict the probability of being selected while including a
variable that is exogenous to the actual outcome that we are interested
in. This estimated probability is then converted into the IMR and used
to control for selection bias in the outcome step. This process however
assumes linear relationships in the selection stage.</p>
<p>In our case we are in fact not dealing with linear relationships in
the selection stage. This is discovered by how we have a increase of
almost 20 %pts in AUC when predicting attempts with a XGBoost model
instead of a linear model. Therefore our first step in correcting
selection bias looks to predict the probability of a attempt of a fourth
down. This prediction then is converted into a Generalized IMR that is
not bound to the assumptions of a IMR. We then place our GIMR in our
outcome equation when estimating the conversion of a fourth down to
control for selection bias.</p>
</div>
<div id="exogenous-variables" class="section level1">
<h1>exogenous variables</h1>
<p>In our sample selection correction model, a validation of the
exogeniety of our variables that are used to predict fourth down
attempts is needed. While we can use theory to prove that these
variables are exogenous to 4th down conversions in football there is the
luxury of empirical evidence. Our situation is unique as 3rd downs can
be used as a proxy of 4th downs with little to no self selection bias.
This is due to how conditions such as desperation or play calling cause
a 3rd down to be treated similarly to a 4th down by the coaches. A
fourth down is a teams last attempt for that offensive drive. While not
in all, there are many cases of third down provide the similar
conditions in terms of the coaches decision making.</p>
<p>In the proof of this we can first note that the grades of a teams
kicker is positivly significant in it’s effect on fourth downs. From a
theoretical side we can reason that the kicker is not on the field
during a fourth down and also is unable to effect the decision making of
the coaches, as there are no further decisions to be made. In a third
down we actually find that kicker grades do have positive significance
on the conversion of a third down. However, this significance is only
found in the middle of the field, where the kicker is more likely to be
used if the third down is not converted. When we look at the situations
on third down that would mirror a fourth down, there is no statistical
significance. When the kicker is not apart of the decision making
process on third down, similarly to fourth down, it does not have a
effect on 3rd down conversion.</p>
<p>[kicker exogeniety table]</p>
</div>
<div id="results" class="section level1">
<h1>results</h1>
<div id="coaches-decision-making" class="section level2">
<h2>Coaches decision making</h2>
<div id="listening-to-kickers" class="section level3">
<h3>listening to kickers</h3>
</div>
<div id="attempt-or-not---gimr" class="section level3">
<h3>attempt or not - GIMR</h3>
</div>
</div>
<div id="player-quality" class="section level2">
<h2>player quality</h2>
<div id="qbs-and-coaches-attempt-decision" class="section level3">
<h3>QBs and coaches attempt decision</h3>
</div>
<div id="tesrbswrs" class="section level3">
<h3>TEs/RBs/WRs</h3>
</div>
<div id="any-defense" class="section level3">
<h3>Any defense</h3>
</div>
</div>
<div id="predictive-results" class="section level2">
<h2>Predictive results</h2>
<div id="pure-predictions" class="section level3">
<h3>pure predictions</h3>
</div>
<div id="variable-importance" class="section level3">
<h3>variable importance</h3>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
